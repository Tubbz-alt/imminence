<div class="well">
  <h3>Version <%= data_set.version %>
    <% if data_set.active? %><span class="label label-success">Active</span><% else %><span class="label">Inactive</span><% end %></h3>

  <% unless data_set.active? %>
  	<%= button_to 'Activate', activate_admin_service_data_set_path(@service, data_set), :class=> 'btn btn-primary activate' %>
  <% end %>

  <p>
    Export:
    <%= link_to 'JSON', place_path(@service.slug, :version => data_set, :format => :json) %> /
    <%= link_to 'KML', place_path(@service.slug, :version => data_set, :format => :kml) %> /
    <%= link_to 'CSV', place_path(@service.slug, :version => data_set, :format => :csv) %>
  </p>
  <p><%= data_set.places.needs_geocoding.count %> places left to geocode. <%= data_set.places.with_geocoding_errors.count %> places with geocode errors.</p>
</div>

<h4>Explore this data set</h4>
<!-- <div class="sample-data">
	<ul>
	  <% data_set.places.limit(3).each do |place| %>
	    <li><code><%= place %></code></li>
	  <% end %>
	</ul>
</div> -->

<% places = data_set.places.page(params[:page]).per(100) %>
<%= paginate places %>

<table class="table table-striped table-condensed">
  <thead>
    <tr>
      <th>Name</th>
      <th>Address</th>
      <th>URL</th>
    </tr>
  </thead>
  <% places.each do |place| %>
    <tr>
      <td><%= place.name %></td>
      <td><%= place.full_address %></td>
      <td><%= place.url || "<em>&mdash;</em>".html_safe %></td>
    </tr>
  <% end %>
</table>

<%= paginate places %>
